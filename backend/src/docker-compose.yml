version: "3.7"

services:
  db:

    build:
      context: .
      dockerfile: Dockerfile

      #restart: always

    image: mirghaeng/pgsj:1.0
    container_name: pgsj-container

    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: pgsj_db

    ports:
      - "5432:5432"

    volumes:
      - pg-data:/var/lib/postgresql/data

    network_mode: host

volumes:
  pg-data:
    external: true
